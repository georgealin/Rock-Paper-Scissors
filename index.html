<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="Permissions-Policy" content="interest-cohort=()">
        <title>Rock Paper Scisor</title>
        <script src="../Rock-Paper-Scissors/script.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <link rel="stylesheet" href="../Rock-Paper-Scissors/style.css">
    </head>
    <body>
        <div class="buttons">
        <button id="btn1">Rock</button>
        <button id="btn2">Paper</button>
        <button id="btn3">Scissors</button>
        </div>
        <div id="result">
                <div id="winsTotal"></div>
                <div id="looseTotal"></div>
                <div id="ties">""</div>
            </div>
        </div>
        <div id="end"></div>
        <button id="restartBtn">Restart Game</button>
            


        <script>
            const btn1 = document.querySelector('#btn1');
            btn1.addEventListener('click', function () {
                playerSelection = "rock";
                playRound(playerSelection)
                cnt();
            });

            const btn2 = document.querySelector('#btn2');
            btn2.addEventListener('click', function () {
                playerSelection = "paper";
                playRound(playerSelection)
                cnt();
            });

            const btn3 = document.querySelector('#btn3');
            btn3.addEventListener('click', restartGame);
            
            function restartGame() {
                playerSelection = "scissors";
                playRound(playerSelection)
                cnt();
            };
            
            const restartBtn = document.          querySelector('#restartBtn');
            
            restartBtn.addEventListener('click',
            function () {
                clearResult();
                clearEnd();
            });
                
            function clearEnd() {
                document.getElementById('end').innerHTML = "";
            };
            //document.getElementsByClassName('result').innerHTML = "";
            //const div = document.getElementsByClassName('result');
            //div.replaceChildren();
            function clearResult() {
            let div = document.getElementById("result");
            while (div.firstChild) {
            div.removeChild(div.firstChild);
            }};

            let ctr = 0;
            function cnt() {
                ctr++;
                if (ctr % 5 == 0 ) {
                    const finalScore = scoreWin - scoreLoose;
                    if (finalScore == 0) {
                        document.getElementById('end').textContent = "It's a tie!Play another game."
                        console.log("It's a tie!Play another game.");
                    } else if (finalScore > 0) {
                        document.getElementById('end').textContent = "You win the game"
                        console.log("You win the game");
                    } else if (finalScore < 0) {
                        document.getElementById('end').textContent = "You lose the game"
                        console.log("You lose the game");
                };
                clearResult();
                
                }
            }
            //Create a function for the computer choice.
            
            let scoreWin = 0;
            let scoreLoose = 0;
            let scoreTie = 0;
            let playerSelection;
            /*function clearContent(div) {
                document.getElementById('result').innerHTML = "";
            }*/
            //Create one round function.It has another function within for computer choice
            function playRound(playerSelection) {
               
                   
                //getComputerChoice return a random index of choices array
                function getComputerChoice(choices) {
                    return choices[Math.floor(Math.random() * choices.length)];    
                };
                //Assign values to choices variable
                const choices = ["rock", "paper", "scissors"];
            
                let computerSelection = getComputerChoice(choices);
                
                if (playerSelection === computerSelection) {
                    const div = document.createElement('div');
                    div.textContent = "It's a tie!";
                    //$('.result').empty();
                    clearResult();
                    clearEnd();
                    document.getElementById('result').appendChild(div);
                    scoreTie++;
                    
                    return "tie";
                } else if (
                    (playerSelection == "rock" && computerSelection == "scissors") ||
                    (playerSelection == "paper" && computerSelection == "rock") ||
                    (playerSelection == "scissors" && computerSelection == "paper")) {
                    const div = document.createElement('div');
                    div.textContent = "You win this round! Your opponent choice was: " + computerSelection;
                    //$('.result').empty();
                    clearResult();
                    clearEnd();
                    document.getElementById('result').appendChild(div);
                    scoreWin++;
                    return "win"
                } else if (
                    (playerSelection == "rock" && computerSelection == "paper") ||
                    (playerSelection == "paper" && computerSelection == "scissors") ||
                    (playerSelection == "scissors" && computerSelection == "rock")) {
                    const div = document.createElement('div');
                    div.textContent = "You loose this round! Your opponent choice was: " + computerSelection;
                    //$('.result').empty();
                    clearResult();
                    clearEnd();
                    document.getElementById('result').appendChild(div);
                    scoreLoose++;
                    return "loose";
                } 
                
                };
                
                /*const resultFinal;
                if (resultFinal === "win") {
                    scoreWin++;
                } else if (resultFinal === "loose") {
                    scoreLoose++;
                } else if (resultFinal === "tie") {
                    scoreTie++;
                }*/
                
                //verify the score and console.log the result
                /*const finalScore = scoreWin - scoreLoose;
                if (finalScore == 0) {
                    console.log("It's a tie!Play another game.");
                } else if (finalScore > 0) {
                    console.log("You win the game");
                } else if (finalScore < 0) {
                    console.log("You lose the game");
                };*/
            
            
            //create function to play 5 rounds
            /*function game(playRound) {
                
                for (let i = 0; i < 5; i++) { 
                // declare result variable to use it for counting the wins and the looses. Assign it value of playRound function      
                const result = playRound();
                if (result === "win") {
                    scoreWin++;
                } else if (result === "loose") {
                    scoreLoose++;
                };
                }
                //verify the score and console.log the result
                const finalScore = scoreWin - scoreLoose;
                if (finalScore == 0) {
                    console.log("It's a tie!Play another game.");
                } else if (finalScore > 0) {
                    console.log("You win the game");
                } else if (finalScore < 0) {
                    console.log("You lose the game");
                };
            }*/
        
                /*if (scoreWin = scoreLoose) {
                console.log("It's a tie!Play another game.");
                    } else if (scoreWin > scoreLoose) {
                    console.log("You win the game");
                    } else if (scoreWin < scoreLoose) {
                    console.log("You lose the game");
                };
                };
            //call the game function
            game(playRound);*/
           
            
        </script>
    </body>
</html>